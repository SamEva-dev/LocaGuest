<div class="settings-container">
  <!-- Header -->
  <header class="settings-header">
    <i class="pi pi-cog text-primary text-2xl"></i>
    <div>
      <h1 class="text-3xl font-bold">Paramètres</h1>
      <p class="text-muted-foreground">Gérez vos préférences et paramètres du compte</p>
    </div>
  </header>

  <!-- Onglets -->
  <nav class="tabs">
    <button (click)="activeTab.set('profile')" [class.active]="activeTab()==='profile'">Profil</button>
    <button (click)="activeTab.set('notifications')" [class.active]="activeTab()==='notifications'">Notifications</button>
    <button (click)="activeTab.set('security')" [class.active]="activeTab()==='security'">Sécurité</button>
    <button (click)="activeTab.set('billing')" [class.active]="activeTab()==='billing'">Facturation</button>
    <button (click)="activeTab.set('preferences')" [class.active]="activeTab()==='preferences'">Préférences</button>
  </nav>

  <!-- Profil -->
  @if (activeTab()==='profile') {
    <div class="card">
      <h3><i class="pi pi-user text-primary"></i> Informations du Profil</h3>
      <p class="subtitle">Mettez à jour vos informations personnelles</p>

      <div class="grid-2">
        <input placeholder="Prénom" [value]="user().firstName" />
        <input placeholder="Nom" [value]="user().lastName" />
        <input placeholder="Email" [value]="user().email" type="email" />
        <input placeholder="Téléphone" [value]="user().phone" />
        <input placeholder="Société" [value]="user().company" />
        <select>
          <option [selected]="user().role==='Propriétaire'">Propriétaire</option>
          <option [selected]="user().role==='Gestionnaire'">Gestionnaire</option>
          <option [selected]="user().role==='Administrateur'">Administrateur</option>
        </select>
      </div>

      <textarea>{{ user().bio }}</textarea>
    </div>
  }

  <!-- Notifications -->
  @if (activeTab()==='notifications') {
    <div class="card">
      <h3><i class="pi pi-bell text-primary"></i> Préférences de Notification</h3>
      <label><span>Notifications Email</span><input type="checkbox" [checked]="emailNotif()" (change)="emailNotif.set($any($event.target).checked)" /></label>
      <label><span>Notifications SMS</span><input type="checkbox" [checked]="smsNotif()" (change)="smsNotif.set($any($event.target).checked)" /></label>
      <label><span>Nouvelles Réservations</span><input type="checkbox" [checked]="bookingsNotif()" (change)="bookingsNotif.set($any($event.target).checked)" /></label>
      <label><span>Rappels de Paiement</span><input type="checkbox" [checked]="paymentNotif()" (change)="paymentNotif.set($any($event.target).checked)" /></label>
      <label><span>Rapports Mensuels</span><input type="checkbox" [checked]="reportNotif()" (change)="reportNotif.set($any($event.target).checked)" /></label>
    </div>
  }

  <!-- Sécurité -->
  @if (activeTab()==='security') {
    <div class="card">
      <h3><i class="pi pi-shield text-primary"></i> Sécurité du Compte</h3>
      <input type="password" placeholder="Mot de passe actuel" />
      <input type="password" placeholder="Nouveau mot de passe" />
      <input type="password" placeholder="Confirmer mot de passe" />
      <button class="btn-primary">Mettre à jour le mot de passe</button>

      <div class="sessions">
        <h4>Sessions Actives</h4>
        @for (s of sessions(); track s) {
          <div class="session">
            <p>{{ s.device }} <span class="text-muted-foreground">{{ s.location }}</span></p>
            @if (s.current) {
              <span class="badge badge-ok">Actuel</span>
            } @else {
              <button class="btn-outline">Déconnecter</button>
            }
          </div>
        }
      </div>
    </div>
  }

  <!-- Facturation -->
  @if (activeTab()==='billing') {
    <div class="card">
      <h3><i class="pi pi-credit-card text-primary"></i> Facturation et Abonnement</h3>
      <div class="plan">
        <p>Plan Professionnel - <b>49€/mois</b></p>
        <small>Renouvellement : 15/04/2024</small>
      </div>
      <h4>Historique</h4>
      @for (inv of invoices(); track inv) {
        <div class="invoice">
          <span>{{ inv.date }}</span>
          <span>{{ inv.amount }} - {{ inv.status }}</span>
        </div>
      }
    </div>
  }

  <!-- Préférences -->
  @if (activeTab()==='preferences') {
    <div class="card">
      <h3><i class="pi pi-globe text-primary"></i> Préférences d'Application</h3>
      <label>Mode sombre <input type="checkbox" [checked]="darkMode()" (change)="darkMode.set($any($event.target).checked)" /></label>
      <select><option value="fr">Français</option><option value="en">English</option></select>
      <select><option>Europe/Paris (GMT+1)</option><option>Europe/London (GMT+0)</option></select>
      <select><option>DD/MM/YYYY</option><option>MM/DD/YYYY</option></select>
      <select><option>EUR (€)</option><option>USD ($)</option></select>

      <div class="danger-zone">
        <h4>Zone de Danger</h4>
        <button class="btn-danger" (click)="deleteAccount()">Supprimer le compte</button>
      </div>
    </div>
  }

  <!-- Actions -->
  <div class="actions">
    <button class="btn-outline" (click)="reset()">Réinitialiser</button>
    <button class="btn-primary" (click)="save()">Sauvegarder</button>
  </div>
</div>
