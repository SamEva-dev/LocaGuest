<div class="w-full max-w-2xl bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden">
  <div class="px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-start justify-between">
    <div>
      <h2 class="text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2">
        <i class="ph ph-warning-circle text-orange-600"></i>
        <span>Préavis</span>
      </h2>
      <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
        {{ data.propertyName }} • {{ data.tenantName }}
        @if (data.roomName) {
          <span> • {{ data.roomName }}</span>
        }
      </p>
    </div>
    <button (click)="cancel()" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300">
      <i class="ph ph-x text-xl"></i>
    </button>
  </div>

  <div class="p-6 space-y-4">
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Date de notification</label>
        <input type="date" [ngModel]="form().noticeDate" (ngModelChange)="updateField('noticeDate', $event)" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white" />
      </div>

      <div>
        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Durée du préavis (mois)</label>
        <select [ngModel]="form().noticeMonths" (ngModelChange)="updateField('noticeMonths', $event)" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white">
          <option [ngValue]="1">1</option>
          <option [ngValue]="2">2</option>
          <option [ngValue]="3">3</option>
        </select>
      </div>
    </div>

    <div class="p-4 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800">
      <p class="text-sm text-orange-800 dark:text-orange-200 flex items-center gap-2">
        <i class="ph ph-calendar-check"></i>
        <span>Fin de préavis estimée : <span class="font-semibold">{{ calculatedEndDate() }}</span></span>
      </p>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Motif</label>
      <textarea rows="3" [ngModel]="form().reason" (ngModelChange)="updateField('reason', $event)" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white" placeholder="Ex: Congé du locataire"></textarea>
    </div>
  </div>

  <div class="px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-end gap-2">
    <button (click)="cancel()" class="px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700">
      Annuler
    </button>
    <button (click)="submit()" [disabled]="isSubmitting()" class="px-4 py-2 rounded-lg bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
      <i class="ph" [class.ph-circle-notch]="isSubmitting()" [class.animate-spin]="isSubmitting()" [class.ph-check]="!isSubmitting()"></i>
      <span>{{ isSubmitting() ? 'Enregistrement...' : 'Enregistrer' }}</span>
    </button>
  </div>
</div>
